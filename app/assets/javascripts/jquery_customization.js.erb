$(document).on('ready page:load', function(){

	//initialize slide show
	$("div.item:first-child").addClass("active");


	//initialize spinner
//	var spinners = $( ".spinner" ).spinner({min: 1});
//
//	$.each( spinners , function(index,spinner){
//		//spinner is a DOM object
//		var max = parseInt($(this).attr("data_max"));
//		$(this).spinner( "option", "max", max);
//		var start_value = $(this).attr("data_start");
//		//fix the bug when product is not enough.
//		if(start_value > max){
//			start_value = max
//		}
//
//		$(this).spinner( "value", start_value);
//		update_cart_item_quantity(this,null,start_value,false);
//
//
//		$(this).on( "spin", function( event, ui ){
//			//console.log(ui.value);
//			update_cart_item_quantity(this,event,ui.value,true);	
//		});
//
//		$(this).on( "spinchange", function(event , ui) {
//			var spin_value = parseInt($(this).attr("aria-valuenow"));
//			//console.log(this);
//			if(spin_value > max){
//				$(this).spinner( "value", max);
//				spin_value = max
//			}
//			update_cart_item_quantity(this,event,spin_value,true);	
//
//		});
//
//	});
//
//  function update_cart_item_quantity(this_obj, event, update_quantity , submit){
//  		var span = $(this_obj).closest("span");
//			var form = span.siblings("form");
//			var input_text = form.find("input[type='number']");
//			//var submit_button = form.find("input[type='submit']");
//			input_text.attr("value" , update_quantity);
//			if(submit == true){
//				form.submit();
//			}
//  } 



  //initialize state td
  var tds = $('td.td_aasm_state');
  $.each( tds , function(td){
  	nowstate = $(this).attr('data_nowstate');
  	setector_str = "li[data_state=" + nowstate + "]";
  	$(this).find(setector_str).addClass("active");

  	
  });

  //initialize state li
  var lis = $('div.pagination li');
	$.each( lis , function(li){

		$(this).on('click', function(){
			console.log(li_siblings);
			var li_siblings = $(this).siblings("li.active");
			li_siblings.removeClass("active");
			$(this).addClass("active");

			var div = $(this).closest("div.pagination");
			var form = div.siblings("form");
			var input_text = form.find("input[type='text']");
			var state = $(this).attr("data_state");
			input_text.attr("value" , state);
			form.submit();
		});
	});

  



	//var tmpl = '<div class="input file optional photo_image form-group"><label class="file optional" for="photo_image">上傳圖片</label><input class="file optional form-control" id="photo_image" name="photo[image]" type="file"></div><label class="file optional" for="photo_image">上傳圖片</label><input class="file optional form-control" id="photo_image" name="photo[image]" type="file"></div>'

});